# ============================================================================
# CLARA Training System - Environment Configuration
# ============================================================================
# Copy to .env and adjust values for your environment
# Security framework is fully controlled via these variables

# ============================================================================
# Security Configuration (üîê ENV-CONTROLLED SECURITY FRAMEWORK)
# ============================================================================

# Security Mode: production | development | debug | testing
# - production: Full JWT + mTLS validation (default for production)
# - development: JWT validation only, no mTLS (for local development)
# - debug: NO SECURITY - Mock user (‚ö†Ô∏è NEVER use in production!)
# - testing: Mock JWT for unit tests
CLARA_SECURITY_MODE=production

# JWT Authentication (overrides mode setting if explicitly set)
# Set to false to disable JWT completely (not recommended)
CLARA_JWT_ENABLED=true

# mTLS (Mutual TLS) for Service-to-Service Communication
# Set to true to enable certificate-based authentication
CLARA_MTLS_ENABLED=false

# ============================================================================
# Keycloak / OIDC Configuration
# ============================================================================

# Keycloak Server URL
KEYCLOAK_URL=http://localhost:8080

# Keycloak Realm (default: vcc)
KEYCLOAK_REALM=vcc

# Client ID for CLARA Training System
KEYCLOAK_CLIENT_ID=clara-training-system

# JWT Algorithm (RS256 recommended for Keycloak)
JWT_ALGORITHM=RS256

# ============================================================================
# Debug Mode Configuration (only used when CLARA_SECURITY_MODE=debug)
# ============================================================================

# Debug User ID
DEBUG_USER_ID=debug-user

# Debug User Email
DEBUG_USER_EMAIL=debug@clara.local

# Debug User Roles (comma-separated)
# Available roles: admin, trainer, analyst, user, auditor
DEBUG_USER_ROLES=admin,trainer

# ============================================================================
# Service Ports
# ============================================================================

# Training Backend Service
CLARA_TRAINING_PORT=45680

# Dataset Management Service
CLARA_DATASET_PORT=45681

# Model Serving Service
CLARA_SERVING_PORT=45682

# Metrics/Monitoring Port (Prometheus)
CLARA_METRICS_PORT=9310

# ============================================================================
# Database Configuration (UDS3)
# ============================================================================

# PostgreSQL
POSTGRES_HOST=192.168.178.94
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DATABASE=postgres
POSTGRES_SCHEMA=public

# ChromaDB (Vector Search)
CHROMADB_HOST=192.168.178.94
CHROMADB_PORT=8000

# Neo4j (Graph Database)
NEO4J_HOST=192.168.178.94
NEO4J_PORT=7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=neo4j

# CouchDB (Document Storage)
COUCHDB_HOST=192.168.178.94
COUCHDB_PORT=32931
COUCHDB_USER=admin
COUCHDB_PASSWORD=admin

# ============================================================================
# Training Configuration
# ============================================================================

# Worker Pool Size
TRAINING_IO_WORKERS=18
TRAINING_CPU_WORKERS=18

# Job Queue Configuration
MAX_CONCURRENT_JOBS=5
JOB_TIMEOUT_SECONDS=3600

# Model Storage
MODEL_CACHE_DIR=./models
ADAPTER_REGISTRY_PATH=./metadata/adapter_registry.json

# ============================================================================
# Model & Training Parameters (VerwLLM Legacy)
# ============================================================================

# Environment Variables f√ºr VerwLLM
CUDA_VISIBLE_DEVICES=0
WANDB_PROJECT=verwLLM
WANDB_ENTITY=your_username

# Modell-Einstellungen
BASE_MODEL=microsoft/DialoGPT-medium
MODEL_OUTPUT_DIR=./models
DATA_DIR=./data

# Training-Parameter
BATCH_SIZE=4
GRADIENT_ACCUMULATION_STEPS=4
LEARNING_RATE=2e-4
NUM_EPOCHS=3
MAX_LENGTH=512

# LoRA-Parameter
LORA_R=16
LORA_ALPHA=32
LORA_DROPOUT=0.1

# QLoRA-Parameter
QLORA_BITS=4
QLORA_COMPUTE_DTYPE=float16

# Ollama-Einstellungen
OLLAMA_HOST=localhost
OLLAMA_PORT=11434

# ============================================================================
# Logging & Monitoring
# ============================================================================

# Log Level: DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_LEVEL=INFO
TENSORBOARD_LOG_DIR=./logs

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_FILE=./logs/audit.log

# Performance Metrics
METRICS_ENABLED=true
METRICS_EXPORT_INTERVAL=60

# ============================================================================
# PKI Configuration (if mTLS enabled)
# ============================================================================

# PKI Service URL
PKI_SERVICE_URL=http://localhost:8443

# Service Certificate Path (auto-generated if using PKI Client)
SERVICE_CERT_PATH=./service_certificates/clara-training.crt
SERVICE_KEY_PATH=./service_certificates/clara-training.key

# CA Certificate Path
CA_CERT_PATH=./ca_storage/ca/ca.crt

# Certificate Auto-Renewal
CERT_AUTO_RENEW=true
CERT_RENEW_THRESHOLD_DAYS=30

# ============================================================================
# Development / Debug Settings
# ============================================================================

# Enable Hot Reload (development only)
HOT_RELOAD=false

# Enable API Documentation (Swagger/ReDoc)
ENABLE_API_DOCS=true

# Enable CORS (for frontend development)
ENABLE_CORS=true
CORS_ORIGINS=http://localhost:3000,http://localhost:8501

# WebSocket Configuration
WEBSOCKET_PING_INTERVAL=30
WEBSOCKET_PING_TIMEOUT=10

# ============================================================================
# Quick Start Configurations
# ============================================================================
# Uncomment ONE of the following blocks for common scenarios:

# --- PRODUCTION DEPLOYMENT ---
# CLARA_SECURITY_MODE=production
# CLARA_JWT_ENABLED=true
# CLARA_MTLS_ENABLED=true
# LOG_LEVEL=INFO
# ENABLE_API_DOCS=false

# --- LOCAL DEVELOPMENT (with Keycloak) ---
# CLARA_SECURITY_MODE=development
# CLARA_JWT_ENABLED=true
# CLARA_MTLS_ENABLED=false
# LOG_LEVEL=DEBUG
# HOT_RELOAD=true

# --- LOCAL DEVELOPMENT (no security) ---
# CLARA_SECURITY_MODE=debug
# CLARA_JWT_ENABLED=false
# CLARA_MTLS_ENABLED=false
# LOG_LEVEL=DEBUG
# HOT_RELOAD=true
# DEBUG_USER_ROLES=admin,trainer,analyst

# --- UNIT TESTING ---
# CLARA_SECURITY_MODE=testing
# LOG_LEVEL=DEBUG
